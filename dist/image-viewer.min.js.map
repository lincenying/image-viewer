{"version":3,"sources":["webpack://imageViewer/webpack/universalModuleDefinition","webpack://imageViewer/./image-viewer.vue?7ae9","webpack://imageViewer/./utils/util.js","webpack://imageViewer/./image-viewer.vue","webpack://imageViewer/./image-viewer.vue?e4d6","webpack://imageViewer/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://imageViewer/./index.js","webpack://imageViewer/external {\"root\":\"Vue\",\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"amd\":\"vue\"}","webpack://imageViewer/webpack/bootstrap","webpack://imageViewer/webpack/startup","webpack://imageViewer/webpack/runtime/compat get default export","webpack://imageViewer/webpack/runtime/define property getters","webpack://imageViewer/webpack/runtime/hasOwnProperty shorthand"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__197__","isServer","Vue","rafThrottle","fn","locked","args","window","requestAnimationFrame","_","apply","this","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","Mode","mousewheelEventName","navigator","userAgent","match","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_injectStyles","originalRender","h","context","call","existing","beforeCreate","concat","_vm","_h","$createElement","_c","_self","attrs","ref","staticClass","style","zIndex","onClickMask","_v","hide","isSingle","_e","class","infinite","isFirst","prev","isLast","next","$event","handleActions","mode","icon","toggleMode","_l","url","i","index","key","refInFor","currentImg","handleImgLoad","handleImgError","stopPropagation","handleMouseDown","ImageViewer","component","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty"],"mappings":"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","file":"image-viewer.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"vue\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imageViewer\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"imageViewer\"] = factory(root[\"Vue\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__197__) {\nreturn ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"viewer-fade\"}},[_c('div',{ref:\"lcy-image-viewer__wrapper\",staticClass:\"lcy-image-viewer__wrapper\",style:({ 'z-index': _vm.zIndex }),attrs:{\"tabindex\":\"-1\"}},[_c('div',{staticClass:\"lcy-image-viewer__mask\",on:{\"click\":_vm.onClickMask}}),_vm._v(\" \"),_c('span',{staticClass:\"lcy-image-viewer__btn lcy-image-viewer__close\",on:{\"click\":_vm.hide}},[_c('i',{staticClass:\"imageviewer iv-circle-close\"})]),_vm._v(\" \"),(!_vm.isSingle)?[_c('span',{staticClass:\"lcy-image-viewer__btn lcy-image-viewer__prev\",class:{ 'is-disabled': !_vm.infinite && _vm.isFirst },on:{\"click\":_vm.prev}},[_c('i',{staticClass:\"imageviewer iv-arrow-left\"})]),_vm._v(\" \"),_c('span',{staticClass:\"lcy-image-viewer__btn lcy-image-viewer__next\",class:{ 'is-disabled': !_vm.infinite && _vm.isLast },on:{\"click\":_vm.next}},[_c('i',{staticClass:\"imageviewer iv-arrow-right\"})])]:_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"lcy-image-viewer__btn lcy-image-viewer__actions\"},[_c('div',{staticClass:\"lcy-image-viewer__actions__inner\"},[_c('i',{staticClass:\"imageviewer iv-zoom-out\",on:{\"click\":function($event){return _vm.handleActions('zoomOut')}}}),_vm._v(\" \"),_c('i',{staticClass:\"imageviewer iv-zoom-in\",on:{\"click\":function($event){return _vm.handleActions('zoomIn')}}}),_vm._v(\" \"),_c('i',{staticClass:\"lcy-image-viewer__actions__divider\"}),_vm._v(\" \"),_c('i',{class:_vm.mode.icon,on:{\"click\":_vm.toggleMode}}),_vm._v(\" \"),_c('i',{staticClass:\"lcy-image-viewer__actions__divider\"}),_vm._v(\" \"),_c('i',{staticClass:\"imageviewer iv-refresh-left\",on:{\"click\":function($event){return _vm.handleActions('anticlocelise')}}}),_vm._v(\" \"),_c('i',{staticClass:\"imageviewer iv-refresh-right\",on:{\"click\":function($event){return _vm.handleActions('clocelise')}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"lcy-image-viewer__canvas\"},[_vm._l((_vm.urlList),function(url,i){return [(i === _vm.index)?_c('img',{key:url,ref:\"img\",refInFor:true,staticClass:\"lcy-image-viewer__img\",style:(_vm.imgStyle),attrs:{\"src\":_vm.currentImg},on:{\"load\":_vm.handleImgLoad,\"error\":_vm.handleImgError,\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMouseDown($event)}}}):_vm._e()]})],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\n\nconst isServer = Vue.prototype.$isServer;\n\nexport const isFirefox = function () {\n    return !Vue.prototype.$isServer && !!window.navigator.userAgent.match(/firefox/i)\n}\n\nexport function rafThrottle(fn) {\n    let locked = false\n    return function (...args) {\n        if (locked) return\n        locked = true\n        window.requestAnimationFrame((_) => {\n            fn.apply(this, args)\n            locked = false\n        })\n    }\n}\n\n/* istanbul ignore next */\nexport const on = (function () {\n    if (!isServer && document.addEventListener) {\n        return function (element, event, handler) {\n            if (element && event && handler) {\n                element.addEventListener(event, handler, false)\n            }\n        }\n    } else {\n        return function (element, event, handler) {\n            if (element && event && handler) {\n                element.attachEvent('on' + event, handler)\n            }\n        }\n    }\n})()\n\n/* istanbul ignore next */\nexport const off = (function () {\n    if (!isServer && document.removeEventListener) {\n        return function (element, event, handler) {\n            if (element && event) {\n                element.removeEventListener(event, handler, false)\n            }\n        }\n    } else {\n        return function (element, event, handler) {\n            if (element && event) {\n                element.detachEvent('on' + event, handler)\n            }\n        }\n    }\n})()\n","<template>\n    <transition name=\"viewer-fade\">\n        <div tabindex=\"-1\" ref=\"lcy-image-viewer__wrapper\" class=\"lcy-image-viewer__wrapper\" :style=\"{ 'z-index': zIndex }\">\n            <div @click=\"onClickMask\" class=\"lcy-image-viewer__mask\"></div>\n            <!-- CLOSE -->\n            <span class=\"lcy-image-viewer__btn lcy-image-viewer__close\" @click=\"hide\">\n                <i class=\"imageviewer iv-circle-close\"></i>\n            </span>\n            <!-- ARROW -->\n            <template v-if=\"!isSingle\">\n                <span class=\"lcy-image-viewer__btn lcy-image-viewer__prev\" :class=\"{ 'is-disabled': !infinite && isFirst }\" @click=\"prev\">\n                    <i class=\"imageviewer iv-arrow-left\" />\n                </span>\n                <span class=\"lcy-image-viewer__btn lcy-image-viewer__next\" :class=\"{ 'is-disabled': !infinite && isLast }\" @click=\"next\">\n                    <i class=\"imageviewer iv-arrow-right\" />\n                </span>\n            </template>\n            <!-- ACTIONS -->\n            <div class=\"lcy-image-viewer__btn lcy-image-viewer__actions\">\n                <div class=\"lcy-image-viewer__actions__inner\">\n                    <i class=\"imageviewer iv-zoom-out\" @click=\"handleActions('zoomOut')\"></i>\n                    <i class=\"imageviewer iv-zoom-in\" @click=\"handleActions('zoomIn')\"></i>\n                    <i class=\"lcy-image-viewer__actions__divider\"></i>\n                    <i :class=\"mode.icon\" @click=\"toggleMode\"></i>\n                    <i class=\"lcy-image-viewer__actions__divider\"></i>\n                    <i class=\"imageviewer iv-refresh-left\" @click=\"handleActions('anticlocelise')\"></i>\n                    <i class=\"imageviewer iv-refresh-right\" @click=\"handleActions('clocelise')\"></i>\n                </div>\n            </div>\n            <!-- CANVAS -->\n            <div class=\"lcy-image-viewer__canvas\">\n                <template v-for=\"(url, i) in urlList\">\n                    <img\n                        v-if=\"i === index\"\n                        ref=\"img\"\n                        class=\"lcy-image-viewer__img\"\n                        :key=\"url\"\n                        :src=\"currentImg\"\n                        :style=\"imgStyle\"\n                        @load=\"handleImgLoad\"\n                        @error=\"handleImgError\"\n                        @mousedown.stop=\"handleMouseDown\"\n                    />\n                </template>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport { on, off, rafThrottle, isFirefox } from './utils/util'\nconst Mode = {\n    CONTAIN: {\n        name: 'contain',\n        icon: 'imageviewer iv-full-screen'\n    },\n    ORIGINAL: {\n        name: 'original',\n        icon: 'imageviewer iv-c-scale-to-original'\n    }\n}\nconst mousewheelEventName = isFirefox() ? 'DOMMouseScroll' : 'mousewheel'\nexport default {\n    name: 'imageViewer',\n    props: {\n        urlList: {\n            type: Array,\n            default: () => []\n        },\n        zIndex: {\n            type: Number,\n            default: 2000\n        },\n        onSwitch: {\n            type: Function,\n            default: () => {}\n        },\n        onClose: {\n            type: Function,\n            default: () => {}\n        },\n        initialIndex: {\n            type: Number,\n            default: 0\n        },\n        closeOnClickMask: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            index: this.initialIndex,\n            isShow: false,\n            infinite: true,\n            loading: false,\n            mode: Mode.CONTAIN,\n            transform: {\n                scale: 1,\n                deg: 0,\n                offsetX: 0,\n                offsetY: 0,\n                enableTransition: false\n            }\n        }\n    },\n    computed: {\n        isSingle() {\n            return this.urlList.length <= 1\n        },\n        isFirst() {\n            return this.index === 0\n        },\n        isLast() {\n            return this.index === this.urlList.length - 1\n        },\n        currentImg() {\n            return this.urlList[this.index]\n        },\n        imgStyle() {\n            const { scale, deg, offsetX, offsetY, enableTransition } = this.transform\n            const style = {\n                transform: `scale(${scale}) rotate(${deg}deg)`,\n                transition: enableTransition ? 'transform .3s' : '',\n                'margin-left': `${offsetX}px`,\n                'margin-top': `${offsetY}px`\n            }\n            if (this.mode === Mode.CONTAIN) {\n                style.maxWidth = style.maxHeight = '100%'\n            }\n            return style\n        }\n    },\n    watch: {\n        index: {\n            handler: function (val) {\n                this.reset()\n                this.onSwitch(val)\n            }\n        },\n        currentImg(val) {\n            this.$nextTick((_) => {\n                const $img = this.$refs.img[0]\n                if (!$img.complete) {\n                    this.loading = true\n                }\n            })\n        }\n    },\n    methods: {\n        onClickMask() {\n            if (this.closeOnClickMask) {\n                this.hide()\n            }\n        },\n        hide() {\n            this.deviceSupportUninstall()\n            this.onClose()\n        },\n        deviceSupportInstall() {\n            this._keyDownHandler = rafThrottle((e) => {\n                const keyCode = e.keyCode\n                switch (keyCode) {\n                    // ESC\n                    case 27:\n                        this.hide()\n                        break\n                    // SPACE\n                    case 32:\n                        this.toggleMode()\n                        break\n                    // LEFT_ARROW\n                    case 37:\n                        this.prev()\n                        break\n                    // UP_ARROW\n                    case 38:\n                        this.handleActions('zoomIn')\n                        break\n                    // RIGHT_ARROW\n                    case 39:\n                        this.next()\n                        break\n                    // DOWN_ARROW\n                    case 40:\n                        this.handleActions('zoomOut')\n                        break\n                }\n            })\n            this._mouseWheelHandler = rafThrottle((e) => {\n                const delta = e.wheelDelta ? e.wheelDelta : -e.detail\n                if (delta > 0) {\n                    this.handleActions('zoomIn', {\n                        zoomRate: 0.015,\n                        enableTransition: false\n                    })\n                } else {\n                    this.handleActions('zoomOut', {\n                        zoomRate: 0.015,\n                        enableTransition: false\n                    })\n                }\n            })\n            on(document, 'keydown', this._keyDownHandler)\n            on(document, mousewheelEventName, this._mouseWheelHandler)\n        },\n        deviceSupportUninstall() {\n            off(document, 'keydown', this._keyDownHandler)\n            off(document, mousewheelEventName, this._mouseWheelHandler)\n            this._keyDownHandler = null\n            this._mouseWheelHandler = null\n        },\n        handleImgLoad(e) {\n            this.loading = false\n        },\n        handleImgError(e) {\n            this.loading = false\n            e.target.alt = '加载失败'\n        },\n        handleMouseDown(e) {\n            if (this.loading || e.button !== 0) return\n            const { offsetX, offsetY } = this.transform\n            const startX = e.pageX\n            const startY = e.pageY\n            this._dragHandler = rafThrottle((ev) => {\n                this.transform.offsetX = offsetX + ev.pageX - startX\n                this.transform.offsetY = offsetY + ev.pageY - startY\n            })\n            on(document, 'mousemove', this._dragHandler)\n            on(document, 'mouseup', (ev) => {\n                off(document, 'mousemove', this._dragHandler)\n            })\n            e.preventDefault()\n        },\n        reset() {\n            this.transform = {\n                scale: 1,\n                deg: 0,\n                offsetX: 0,\n                offsetY: 0,\n                enableTransition: false\n            }\n        },\n        toggleMode() {\n            if (this.loading) return\n            const modeNames = Object.keys(Mode)\n            const modeValues = Object.values(Mode)\n            const index = modeValues.indexOf(this.mode)\n            const nextIndex = (index + 1) % modeNames.length\n            this.mode = Mode[modeNames[nextIndex]]\n            this.reset()\n        },\n        prev() {\n            if (this.isFirst && !this.infinite) return\n            const len = this.urlList.length\n            this.index = (this.index - 1 + len) % len\n        },\n        next() {\n            if (this.isLast && !this.infinite) return\n            const len = this.urlList.length\n            this.index = (this.index + 1) % len\n        },\n        handleActions(action, options = {}) {\n            if (this.loading) return\n            const { zoomRate, rotateDeg, enableTransition } = {\n                zoomRate: 0.2,\n                rotateDeg: 90,\n                enableTransition: true,\n                ...options\n            }\n            const { transform } = this\n            switch (action) {\n                case 'zoomOut':\n                    if (transform.scale > 0.2) {\n                        transform.scale = parseFloat((transform.scale - zoomRate).toFixed(3))\n                    }\n                    break\n                case 'zoomIn':\n                    transform.scale = parseFloat((transform.scale + zoomRate).toFixed(3))\n                    break\n                case 'clocelise':\n                    transform.deg += rotateDeg\n                    break\n                case 'anticlocelise':\n                    transform.deg -= rotateDeg\n                    break\n            }\n            transform.enableTransition = enableTransition\n        }\n    },\n    mounted() {\n        this.deviceSupportInstall()\n        // add tabindex then wrapper can be focusable via Javascript\n        // focus wrapper so arrow key can't cause inner scroll behavior underneath\n        this.$refs['lcy-image-viewer__wrapper'].focus()\n    }\n}\n</script>","import { render, staticRenderFns } from \"./image-viewer.vue?vue&type=template&id=88598f5c&\"\nimport script from \"./image-viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./image-viewer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!./node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import ImageViewer from './image-viewer.vue';\nimport './fonts/iconfont.css';\nimport './image.css';\n\n/* istanbul ignore next */\nImageViewer.install = function(Vue) {\n  Vue.component(ImageViewer.name, ImageViewer);\n};\n\nexport default ImageViewer;","module.exports = __WEBPACK_EXTERNAL_MODULE__197__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(196);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"sourceRoot":""}